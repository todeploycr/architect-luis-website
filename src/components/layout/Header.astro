---
// Header.astro
const navLinks = [
  { name: "Inicio", href: "/" },
  { name: "Nosotros", href: "/#nosotros" },
  { name: "Servicios", href: "/#servicios" },
  { name: "Proyectos", href: "/#proyectos" },
  { name: "Clientes", href: "/#clientes" },
  { name: "Contacto", href: "/#contacto" },
];

const currentPath = Astro.url.pathname;
const isHomePage = currentPath === "/";
---

<header
  id="main-header"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-500 bg-black/40 backdrop-blur-sm"
>
  <nav class="container-corporate flex items-center justify-between py-4">
    <!-- Logo -->
    <a href="/" class="relative z-10">
      <img
        src="/src/assets/img/logo-larq.png"
        alt="LARQ Arquitectura"
        id="logo"
        class="h-12 transition-all duration-300"
      />
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden lg:flex items-center gap-8">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class={`text-sm font-medium tracking-wide transition-colors duration-300 hover:text-[#D4AF37] text-white ${
            currentPath === link.href ? "text-[#D4AF37]" : ""
          }`}
        >
          {link.name}
        </a>
      ))}
      <a 
        href="/contacto" 
        class="bg-[#D4AF37] hover:bg-[#B8941F] text-black px-6 py-2.5 font-semibold tracking-wide transition-all duration-300 rounded-sm text-sm"
      >
        Solicitar Consulta
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-button"
      class="lg:hidden p-2 text-white transition-colors"
      aria-label="Toggle menu"
    >
      <svg id="menu-icon" class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
      <svg id="close-icon" class="w-7 h-7 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </nav>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="lg:hidden bg-black/95 backdrop-blur-md border-t border-white/10 overflow-hidden transition-all duration-300 max-h-0 opacity-0"
  >
    <div class="container-corporate py-6 flex flex-col gap-4">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class={`block text-lg font-medium py-2 border-b border-white/10 hover:text-[#D4AF37] transition-colors text-white ${
            currentPath === link.href ? "text-[#D4AF37]" : ""
          }`}
        >
          {link.name}
        </a>
      ))}
      <a 
        href="/contacto" 
        class="bg-[#D4AF37] hover:bg-[#B8941F] text-black px-6 py-3 font-semibold tracking-wide transition-all duration-300 rounded-sm text-center mt-4"
      >
        Solicitar Consulta
      </a>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const menuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuIcon = document.getElementById("menu-icon");
  const closeIcon = document.getElementById("close-icon");

  menuButton?.addEventListener("click", () => {
    const isOpen = mobileMenu?.classList.contains("max-h-96");
    
    if (isOpen) {
      mobileMenu?.classList.remove("max-h-96", "opacity-100");
      mobileMenu?.classList.add("max-h-0", "opacity-0");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    } else {
      mobileMenu?.classList.remove("max-h-0", "opacity-0");
      mobileMenu?.classList.add("max-h-96", "opacity-100");
      menuIcon?.classList.add("hidden");
      closeIcon?.classList.remove("hidden");
    }
  });

  // Close mobile menu when clicking on a link
  document.querySelectorAll("#mobile-menu a").forEach(link => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.remove("max-h-96", "opacity-100");
      mobileMenu?.classList.add("max-h-0", "opacity-0");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    });
  });
</script>
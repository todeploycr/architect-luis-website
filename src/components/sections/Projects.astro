---
// src/components/sections/Projects.astro
const categories = ["Todos", "Residencial", "Comercial", "Bioclimático"];

const projects = [
  {
    id: 1,
    title: "Casa FQ",
    category: "Residencial",
    location: "Guanacaste, Costa Rica",
    year: "2024",
    image: "/src/assets/img/project-modern-house.png",
    description: "Residencia contemporánea con acabados de alta gama y diseño minimalista.",
  },
  {
    id: 2,
    title: "Loft Urbano",
    category: "Residencial",
    location: "San José, Costa Rica",
    year: "2023",
    image: "/src/assets/img/project-interior.png",
    description: "Interior moderno con integración de vegetación y espacios abiertos.",
  },
  {
    id: 3,
    title: "Eco Lodge Tropical",
    category: "Bioclimático",
    location: "Nicoya, Costa Rica",
    year: "2023",
    image: "/src/assets/img/project-cabin-interior.png",
    description: "Hospedaje sostenible construido con materiales locales y técnicas tradicionales.",
  },
  {
    id: 4,
    title: "Cabaña Palmera",
    category: "Bioclimático",
    location: "Nosara, Costa Rica",
    year: "2024",
    image: "/src/assets/img/project-tropical-cabin.png",
    description: "Arquitectura tropical que se integra armónicamente con su entorno natural.",
  },
  {
    id: 5,
    title: "Casa Enredadera",
    category: "Residencial",
    location: "Tamarindo, Costa Rica",
    year: "2023",
    image: "/src/assets/img/project-spiral-stairs.png",
    description: "Vivienda con escalera escultórica y diseño biofílico.",
  },
  {
    id: 6,
    title: "Villa Tropical",
    category: "Residencial",
    location: "Liberia, Costa Rica",
    year: "2024",
    image: "/src/assets/img/project-white-house.png",
    description: "Proyecto mixto con espacios comerciales y residenciales de alta categoría.",
  },
];
---

<section class="py-20 bg-[#E3D9C6]/20">
  <div class="container-corporate">
    <!-- Header -->
    <div class="text-center max-w-3xl mx-auto mb-12">
      <span class="text-[#4C9141] font-medium tracking-[0.3em] text-xs uppercase mb-4 block">
        PORTAFOLIO
      </span>
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-serif font-normal text-[#3D3635] leading-tight mb-6">
        Proyectos que definen nuestra trayectoria
      </h2>
      <p class="text-[#3D3635]/60 leading-relaxed text-base">
        Cada proyecto es una oportunidad para crear espacios únicos que trascienden 
        el tiempo y mejoran la vida de quienes los habitan.
      </p>
    </div>

    <!-- Category Filter -->
    <div class="flex flex-wrap justify-center gap-4 mb-12">
      {categories.map((category) => (
        <button
          data-category={category}
          class={`category-btn px-6 py-2.5 text-sm font-medium rounded-sm transition-all duration-300 ${
            category === "Todos"
              ? "bg-[#4C9141] text-white"
              : "bg-[#E3D9C6]/50 text-[#3D3635] hover:bg-[#E3D9C6]"
          }`}
        >
          {category}
        </button>
      ))}
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {projects.map((project) => (
        <div
          class="project-item group cursor-pointer"
          data-category={project.category}
        >
          <div class="relative overflow-hidden rounded-sm h-[400px] mb-4">
            <img
              src={project.image}
              alt={project.title}
              class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
            />
            <!-- Dark gradient overlay -->
            <div class="absolute inset-0 bg-gradient-to-t from-[#3D3635]/90 via-[#3D3635]/40 to-transparent" />
            
            <!-- Content -->
            <div class="absolute inset-0 flex flex-col justify-end p-6 z-10">
              <span class="text-[#E2C200] text-sm font-medium mb-2 uppercase tracking-wide">
                {project.category}
              </span>
              <h3 class="text-2xl font-serif font-normal text-white mb-1">
                {project.title}
              </h3>
              <p class="text-white/80 text-sm">
                {project.location} · {project.year}
              </p>
            </div>
          </div>
        </div>
      ))}
    </div>

<script>
  // Category filtering
  const categoryButtons = document.querySelectorAll('.category-btn');
  const projectItems = document.querySelectorAll('.project-item');

  categoryButtons.forEach((btn) => {
    btn.addEventListener('click', () => {
      const category = btn.getAttribute('data-category') || 'Todos';
      
      // Update active state
      categoryButtons.forEach((b) => {
        b.classList.remove('bg-[#4C9141]', 'text-white');
        b.classList.add('bg-[#E3D9C6]/50', 'text-[#3D3635]', 'hover:bg-[#E3D9C6]');
      });
      btn.classList.remove('bg-[#E3D9C6]/50', 'text-[#3D3635]', 'hover:bg-[#E3D9C6]');
      btn.classList.add('bg-[#4C9141]', 'text-white');
      
      // Filter projects
      projectItems.forEach((item) => {
        const itemCategory = item.getAttribute('data-category');
        
        if (category === 'Todos' || itemCategory === category) {
          (item as HTMLElement).style.display = 'block';
        } else {
          (item as HTMLElement).style.display = 'none';
        }
      });
    });
  });
</script>